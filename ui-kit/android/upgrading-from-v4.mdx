---
title: "Upgrading From V4"
---



## Introduction

The **CometChat v5 Android UI Kit** streamlines the integration of in-app chat functionality into your applications. Packed with prebuilt, modular UI components, it supports essential messaging features for both one-to-one and group conversations. With built-in theming options, including light and dark modes, customizable fonts, colors, and extensive configuration possibilities, developers can create chat experiences tailored to their application’s needs.

<Frame>
  <img src="/images/7e8b813d-chat_experience_full_tab_based-28115d603d38f5bbfbfe170739aa478c.png" />
</Frame>

## Integration

In **v4**, integration was straightforward due to the availability of composite components like `CometChatConversationsWithMessages`. This single component provided end-to-end functionality, including listing conversations, handling conversation clicks, loading messages (message header, list, composer), displaying user or group details, and supporting threaded messages. Developers could achieve all these features with minimal setup. However, customization posed significant challenges. Customizing the UI or adding custom views required a deep understanding of the internal flow of the composite component. Additionally, configurations were a mix of custom view props, behavioural props, and style props, which often led to confusion. Styling deeply nested components also proved cumbersome, limiting the developer’s ability to make meaningful changes.

<Frame>
  <img src="/images/fd54273f-overview_cometchat_screens-0412e27904311e4dc4e77cf41ca8ab7f.png" />
</Frame>

With **v5**, composite components have been replaced with smaller, modular components, such as `Conversations`, `Message Header`, `Message List`, and `Message Composer`. This modular approach makes integration more flexible and easier to understand. Each component has a well-defined purpose, allowing developers to use them in ways that suit their specific requirements. The need for complex configurations has been eliminated, as developers can now customize behavior and styling directly via props. Styling has been significantly simplified, with every component carefully assigned, enabling developers to customize styles globally or at the component level effortlessly.

To support the transition from v4 to v5, CometChat has built a [sample app](https://github.com/cometchat/cometchat-uikit-android) that replicates the functionality of v4’s composite components. This sample app serves as a reference for developers looking to build additional features such as user/group details, call log details, threaded messages, and advanced messaging capabilities. By following this approach, developers can take full advantage of v5’s modular design while implementing complex functionality in an organized manner.

<Frame>
  <img src="/images/7e8b813d-chat_experience_full_tab_based-28115d603d38f5bbfbfe170739aa478c.png" />
</Frame>

<Note>

Learn how to build a complete messaging UI using the **v5 UI Kit** by following the step-by-step guide [here](/ui-kit/android/getting-started#1%EF%B8%8F⃣-conversation-list-%2B-message-view).

</Note>

## Components

The **v4** UI Kit provided composite components like `CometChatConversationsWithMessages`, which offered end-to-end functionality. These components integrated features such as conversation lists, message views (header, list, composer), user/group details, and threaded messages into a single unit. However, customization of deeply nested components through configuration was challenging and resulted in a suboptimal developer experience.

| Components in v4 UI Kit:           |                            |                              |
| ---------------------------------- | -------------------------- | ---------------------------- |
| CometChatConversationsWithMessages | CometChatUsersWithMessages | CometChatGroupsWithMessages  |
| CometChatMessages                  | CometChatMessageHeader     | CometChatMessageList         |
| CometChatMessageComposer           | CometChatThreadedMessages  | CometChatConversations       |
| CometChatUsers                     | CometChatGroups            | CometChatContacts            |
| CometChatDetails                   | CometChatGroupMembers      | CometChatAddMembers          |
| CometChatBannedMembers             | CometChatTransferOwnership | CometChatMessageInformation  |
| CometChatIncomingCall              | CometChatOngoingCall       | CometChatOutgoingCall        |
| CometChatCallButtons               | CometChatCallLogs          | CometChatCallLogDetails      |
| CometChatCallLogHistory            | CometChatCallLogRecordings | CometChatCallLogParticipants |
| CometChatCallLogsWithDetails       |

In **v5**, the composite approach is replaced with smaller, modular components like `Conversations`, `Message Header`, `Message List`, and `Message Composer`. Developers now need to stitch these components together to build the desired functionality. This change allows for greater flexibility and easier customization via props, significantly improving the developer experience while maintaining functionality.

| Components in v5 UI Kit: |                                 |                       |
| ------------------------ | ------------------------------- | --------------------- |
| CometChatConversations   | CometChatUsers                  | CometChatGroups       |
| CometChatGroupMembers    | CometChatMessageHeader          | CometChatMessageList  |
| CometChatMessageComposer | CometChatThreadedHeader         | CometChatIncomingCall |
| CometChatOutgoingCall    | CometChatCallButtons            | CometChatCallLogs     |

## Theming

In **v4**, theming was managed using the `Palette` and `Typography` classes. The `Palette` class provided methods like `background`, `mode`, `primary`, `secondary`, and similar setters for configuring colors and themes. While this approach worked, it required instantiating multiple objects and passing them through constructors, which added complexity to the theming process. Developers had to create palette and typography instances, configure them with various color and font settings, and then pass them to create a theme object.

The reliance on Context for theming introduced several challenges. Customizing themes often required developers to consume the theme from the context and then explicitly update values programmatically, which added unnecessary complexity. For example, switching between light and dark modes required interacting with the theme’s context and invoking specific methods like `mode`. This process was less straightforward compared to the traditional approach to define themes dynamically.

<Tabs>
<Tab title="Java">
```java
Palette palette = Palette.getInstance();
palette.primary(Color.parseColor("#YourPrimaryColor"));
palette.secondary(Color.parseColor("#YourSecondaryColor"));
palette.accent(Color.parseColor("#YourAccentColor"));
palette.mode(CometChatTheme.MODE.DARK);

Typography typography = Typography.getInstance();
typography.setName(R.style.font);
```

</Tab>

<Tab title="Kotlin">
```kotlin
val palette = Palette.getInstance()
palette.primary(Color.parseColor("#YourPrimaryColor"))
palette.secondary(Color.parseColor("#YourSecondaryColor"))
palette.accent(Color.parseColor("#YourAccentColor"))
palette.mode(CometChatTheme.MODE.DARK)

val typography = Typography.getInstance()
typography.name = R.style.TextAppearance
```

</Tab>

</Tabs>

In v5, theming has been completely revamped to align with standard Android development practices. The complex theming classes and programmatic object instantiation have been replaced with **XML-based theme attributes** in `themes.xml`. This approach leverages Android's native theming system built on Material Components, specifically using `CometChatTheme.DayNight` as the parent theme.

The new theming system is **declarative, XML-based, and follows Android conventions**. Developers now define themes in `themes.xml` by extending `CometChatTheme.DayNight` and overriding specific attributes. For example, changing the primary color is as simple as overriding the `cometchatPrimaryColor` attribute — no need to instantiate objects or write programmatic theming logic.

**themes.xml:**
```xml
<resources>
    <style name="AppTheme" parent="CometChatTheme.DayNight">
        <!-- Override primary color -->
        <item name="cometchatPrimaryColor">#F76808</item>
        
        <!-- Override other theme attributes as needed -->
        <item name="cometchatBackgroundColor">#FFFFFF</item>
        <item name="cometchatTextPrimaryColor">#141414</item>
        
        <!-- Typography customization -->
        <item name="android:fontFamily">@font/your_custom_font</item>
    </style>
</resources>
```

**Key Benefits:**
- **Native Android approach**: Uses standard XML theme attributes and Material Components
- **Automatic light/dark mode support**: Built on `Theme.MaterialComponents.DayNight.NoActionBar`, providing seamless theme switching based on system settings
- **No programmatic complexity**: No need to instantiate `Palette` or `Typography` objects
- **Centralized configuration**: All theme properties defined in one place (`themes.xml`)

This architectural redesign makes theming more intuitive and aligns perfectly with modern Android development practices. Developers now have a simpler, more powerful, and more standardized toolset to customize and manage themes effectively.

<Note>

For detailed guidance on theming and customizing colors in the CometChat React UI Kit, refer to the following resources:

* **Theming Documentation:** [Guide to Theming](/ui-kit/android/theme-introduction)
* **Color Customization:** [Customizing Colors](/ui-kit/android/color-resources)

</Note>

## Properties

In **v5**, the approach to component properties has been significantly refined to improve clarity and ease of use. All style-related properties have been streamlined to work seamlessly with the new theming system based on direct property access. This change ensures a more efficient and flexible styling process without the need for verbose or redundant configuration within the component properties.

Configuration properties, which were prominent in v4, have also been simplified. With v5's modular design, components are no longer deeply nested, making complex configurations unnecessary. Developers now have direct control over each component through clearly defined properties, reducing complexity and increasing flexibility in how components are used and styled.

Custom view properties have undergone a comprehensive overhaul to ensure consistency across all components. For example, components that are represented as list items now share a uniform set of customizable properties, enabling a standardized approach to customization. These properties include:

- `itemView` - Custom view for the entire item
- `leadingView` - Custom view for the leading section
- `trailingView` - Custom view for the trailing section  
- `subtitleView` - Custom view for the subtitle
- `titleView` - Custom view for the title

This consistent naming convention makes it easier for developers to understand and apply customizations across various components, streamlining the development process.

For a comprehensive overview of newly added, renamed, and removed properties, refer to the [Property Changes](/ui-kit/android/property-changes) Documentation.