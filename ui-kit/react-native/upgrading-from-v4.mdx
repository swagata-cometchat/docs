---
title: "Upgrading From V4"
---



## Introduction

The **CometChat v5 React Native UI Kit** streamlines the integration of in-app chat functionality into your applications. Packed with prebuilt, modular UI components, it supports essential messaging features for both one-to-one and group conversations. With built-in theming options, including light and dark modes, customizable fonts, colors, and extensive configuration possibilities, developers can create chat experiences tailored to their application’s needs.

<Frame>
  <img src="/images/7e8b813d-chat_experience_full_tab_based-28115d603d38f5bbfbfe170739aa478c.png" />
</Frame>

## Integration

In **v4**, integration was straightforward due to the availability of composite components like `CometChatConversationsWithMessages`. This single component provided end-to-end functionality, including listing conversations, handling conversation clicks, loading messages (message header, list, composer), displaying user or group details, and supporting threaded messages. Developers could achieve all these features with minimal setup. However, customization posed significant challenges. Customizing the UI or adding custom views required a deep understanding of the internal flow of the composite component. Additionally, configurations were a mix of custom view props, behavioural props, and style props, which often led to confusion. Styling deeply nested components also proved cumbersome, limiting the developer’s ability to make meaningful changes.

<Frame>
  <img src="/images/44a5b97b-overview_cometchat_screens-5c7734e817eecca89593e6f738db972d.png" />
</Frame>

With **v5**, composite components have been replaced with smaller, modular components, such as `Conversations`, `Message Header`, `Message List`, and `Message Composer`. This modular approach makes integration more flexible and easier to understand. Each component has a well-defined purpose, allowing developers to use them in ways that suit their specific requirements. The need for complex configurations has been eliminated, as developers can now customize behavior and styling directly via props and theme provider. Styling has been significantly simplified, with every component carefully assigned, enabling developers to customize styles globally or at the component level effortlessly.

To support the transition from v4 to v5, CometChat has built a [sample app](https://github.com/cometchat/cometchat-uikit-react-native/tree/v5/examples/SampleApp) that replicates the functionality of v4’s composite components. This sample app serves as a reference for developers looking to build additional features such as user/group details, call log details, threaded messages, and advanced messaging capabilities. By following this approach, developers can take full advantage of v5’s modular design while implementing complex functionality in an organized manner.

<Frame>
  <img src="/images/7e8b813d-chat_experience_full_tab_based-28115d603d38f5bbfbfe170739aa478c.png" />
</Frame>

<Note>

Learn how to build a complete messaging UI using the **v5 UI Kit** by following the step-by-step guide [here](/ui-kit/react-native/getting-started).

</Note>

## Components

The **v4** UI Kit provided composite components like `CometChatConversationsWithMessages`, which offered end-to-end functionality. These components integrated features such as conversation lists, message views (header, list, composer), user/group details, and threaded messages into a single unit. However, customization of deeply nested components through configuration was challenging and resulted in a suboptimal developer experience.

| Components in v4 UI Kit:           |                            |                              |
| ---------------------------------- | -------------------------- | ---------------------------- |
| CometChatConversationsWithMessages | CometChatUsersWithMessages | CometChatGroupsWithMessages  |
| CometChatMessages                  | CometChatMessageHeader     | CometChatMessageList         |
| CometChatMessageComposer           | CometChatThreadedMessages  | CometChatConversations       |
| CometChatUsers                     | CometChatGroups            | CometChatContacts            |
| CometChatDetails                   | CometChatGroupMembers      | CometChatAddMembers          |
| CometChatBannedMembers             | CometChatTransferOwnership | CometChatMessageInformation  |
| CometChatIncomingCall              | CometChatOngoingCall       | CometChatOutgoingCall        |
| CometChatCallButtons               | CometChatCallLogs          | CometChatCallLogDetails      |
| CometChatCallLogHistory            | CometChatCallLogRecordings | CometChatCallLogParticipants |
| CometChatCallLogsWithDetails       | CometChatUserMemberWrapper |                              |

In **v5**, the composite approach is replaced with smaller, modular components like `Conversations`, `Message Header`, `Message List`, and `Message Composer`. Developers now need to stitch these components together to build the desired functionality. This change allows for greater flexibility and easier customization via props, significantly improving the developer experience while maintaining functionality.

| Components in v5 UI Kit: |                                 |                       |
| ------------------------ | ------------------------------- | --------------------- |
| CometChatConversations   | CometChatUsers                  | CometChatGroups       |
| CometChatGroupMembers    | CometChatMessageHeader          | CometChatMessageList  |
| CometChatMessageComposer | CometChatThreadedMessagePreview | CometChatIncomingCall |
| CometChatOutgoingCall    | CometChatCallButtons            | CometChatCallLogs     |

## Theming

In **v4**, theming was managed using the CometChatTheme class, which included two key properties: Typography and Palette. The Palette property provided methods like `setAccent50()`, `setPrimary()`, and `setMode()` for configuring colors and themes. The theming system relied heavily on React’s Context API, utilizing CometChatThemeProvider and CometChatThemeContext to retrieve and update theme settings. While Context is a core concept in React, it wasn’t the most intuitive or efficient approach for theming.

The reliance on Context for theming introduced several challenges. Customizing themes often required developers to consume the theme from the context and then explicitly update values programmatically, which added unnecessary complexity. For example, switching between light and dark modes required interacting with the theme’s context and invoking specific methods like `setMode()`. This process was less straightforward compared to the traditional approach of using CSS class names or data attributes to define themes dynamically. Furthermore, this method wasn’t as idiomatic to modern frontend development practices, where CSS-based theming provides simplicity, flexibility, and better alignment with browser capabilities.


```tsx App.tsx (v4)
import React, { useState } from 'react';
import { View } from 'react-native';
import { CometChatTheme } from '@cometchat/chat-uikit-react-native';
import { CometChatContextProvider } from '@cometchat/chat-uikit-react-native';

const App = () => {
  const [theme] = useState(new CometChatTheme({}));

  const changeThemeMode = (mode: "light" | "dark") => {
    let newTheme = new CometChatTheme({});
    newTheme.palette.setMode(mode);
    // Apply the new theme
  }

  return (
    <View style={{ flex: 1 }}>
      <CometChatContextProvider theme={theme}>
        {/* Your app components */}
      </CometChatContextProvider>
    </View>
  );
};

export default App;
```

In **v5**, theming has been simplified with the `CometChatThemeProvider` component that accepts a structured theme object. The complex theme class instantiation and setter methods have been replaced with direct theme object configuration. This approach allows developers to directly define theme properties without needing to understand internal theme class structures.

The new theming system provides better flexibility for component-level styling through theme overrides. Developers can create theme objects that target specific components and their styles, making customization more intuitive and straightforward. The `CometChatI18nProvider` has also been separated from theming concerns, providing cleaner separation of localization and theme management.


```tsx App.tsx (v5)
import React from "react";
import { SafeAreaView } from "react-native";
import { CometChatThemeProvider, CometChatI18nProvider } from "@cometchat/chat-uikit-react-native";

const customTheme = {
  light: {
    color: {
      primary: '#f76808',
      background1: '#ffffff',
      background2: '#feede1',
    },
    messageListStyles: {
      outgoingMessageBubbleStyles: {
        containerStyle: {
          backgroundColor: '#f76808',
        },
      },
    },
  },
  dark: {
    color: {
      primary: '#f76808',
      background1: '#1a1a1a',
      background2: '#2a2a2a',
    },
  },
};

const App = () => {
  return (
    <SafeAreaView style={{ flex: 1 }}>
      <CometChatThemeProvider theme={customTheme}>
        <CometChatI18nProvider>
          {/* Your app components */}
        </CometChatI18nProvider>
      </CometChatThemeProvider>
    </SafeAreaView>
  );
};

export default App;
```

<Note>

For detailed guidance on theming and customizing colors in the CometChat React Native UI Kit, refer to the following resources:

* **Theming Documentation:** [Guide to Theming](/ui-kit/react-native/theme)
* **Component Styling:** [Component Styling](/ui-kit/react-native/component-styling)

</Note>

## Properties

In **v5**, the approach to component properties has been significantly refined to improve clarity and ease of use. All style-related properties have been streamlined to work seamlessly with the new theming system based on direct property access. This change ensures a more efficient and flexible styling process without the need for verbose or redundant configuration within the component properties.

Configuration properties, which were prominent in v4, have also been simplified. With v5's modular design, components are no longer deeply nested, making complex configurations unnecessary. Developers now have direct control over each component through clearly defined properties, reducing complexity and increasing flexibility in how components are used and styled.

Custom view properties have undergone a comprehensive overhaul to ensure consistency across all components. For example, components that are represented as list items now share a uniform set of customizable properties, enabling a standardized approach to customization. These properties include:

- `itemView` - Custom view for the entire item
- `leadingView` - Custom view for the leading section
- `trailingView` - Custom view for the trailing section  
- `subtitleView` - Custom view for the subtitle
- `titleView` - Custom view for the title

This consistent naming convention makes it easier for developers to understand and apply customizations across various components, streamlining the development process.

For a comprehensive overview of newly added, renamed, and removed properties, refer to the [Property Changes](/ui-kit/react-native/property-changes) Documentation.